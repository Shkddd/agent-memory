"""
Configuration module for Agent Memory System
"""
from dataclasses import dataclass
from typing import Optional

@dataclass
class RedisConfig:
    """Redis configuration for working memory"""
    host: str = "localhost"
    port: int = 6379
    db:  int = 0
    max_window_size: int = 10
    ttl_hours: int = 24

@dataclass
class EmbeddingConfig:
    """Embedding model configuration"""
    model_name:  str = "all-MiniLM-L6-v2"
    vector_dim: int = 384
    batch_size: int = 32

@dataclass
class MemoryConfig:
    """Long-term memory (FAISS) configuration"""
    vector_dim: int = 384
    index_type: str = "flat"  # "flat" or "ivf"
    index_path: str = "data/memory_index. faiss"
    map_path: str = "data/memory_map.json"

@dataclass
class MemoryManagerConfig:
    """Memory manager orchestration config"""
    retrieval_top_k: int = 3
    context_max_tokens: int = 2000
    redis:  RedisConfig = None
    embedding: EmbeddingConfig = None
    memory: MemoryConfig = None
    
    def __post_init__(self):
        if self.redis is None:
            self.redis = RedisConfig()
        if self.embedding is None:
            self.embedding = EmbeddingConfig()
        if self.memory is None:
            self.memory = MemoryConfig()

# Default configuration
DEFAULT_CONFIG = MemoryManagerConfig()
